function whod() {
join <(join <(who | egrep -o "^[a-zA-Z0-9 ]+ pts/[0-9]+[ ]+[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}" | sort) <(who | egrep -o '^[a-zA-Z0-9]+ ' | sort | xargs -I{} sh -c "cat /etc/passwd | cut -d':' -f1,5 | cut -d',' -f1 | egrep {}" | tr ":" " " | sort) | uniq | sort -k 1| awk '{printf "%s %s %s %s %s %s\n", $2, $1, $3, $4, $5, $6}') <(who | tr -s ' ' | cut -d" " -f1 | xargs -I {} w {} | egrep "^[a-z0-9]+" | tr -s " " | sort | uniq | cut -d" " -f 2,5 | awk '!seen[$1]++') 2> /dev/null | cut -d" " -f1,2,4,5,6,7  | awk '{if($6 ~ /s/){printf"%s %s %s %s %s <1m\n",$2, $4, $5, $1, $3} else if($6 ~/m/) { if($6 ~ /^.:/) {printf"%s %s %s %s %s >%sh\n",$2, $4, $5, $1, $3, substr($6,1,1)} else {printf"%s %s %s %s %s >%sh\n",$2, $4, $5, $1, $3, substr($6, 1,2)} }else{ if($6 ~/^.:/) {printf"%s %s %s %s %s ~%sm\n",$2, $4, $5, $1, $3, substr($6, 1, 1)} else { printf"%s %s %s %s %s ~%sm\n",$2, $4, $5, $1, $3, substr($6, 1, 2) } }}'| column -t 2>/dev/null
}

function leaderboard() {
join <(last | awk '{print $1,$10}' | sed 's/(//g' | sed 's/)//g'  | sed 's/:/ /g' | awk '{arr[$1] += (($2*60) + $3)} END { for(i in arr) {printf "%s %s %s %s\n", i, int(arr[i]/1440),(int(arr[i]/60)%24), arr[i]%60} }' | sort ) <(cat /etc/passwd | cut -d":" -f1,5 | cut -d"," -f1 | tr ":" " " | sort) | sort -k2,2nr -k3,3nr -k4,4nr| awk '{printf "â„–%s %s %s %s | %sd %sh%sm\n" ,NR,$1,$5,$6,$2,$3,$4}' | column -t 
}
